gcc -o stack -z execstack -m32 -fno-stack-protector stack.c
sudo chown root stack
sudo chmod 4755 stack

IF NOT WORKING:
sudo apt-get install libx32gcc-4.8-dev
sudo apt-get install libc6-dev-i386


sudo sysctl -w kernel.randomize_va_space=0

gcc -z execstack -m32 -fno-stack-protector -g -o stack_dbg stack.c
touch badfile
gdb stack_dbg

b foo
run

p $ebp 
---> addr1 
p &buffer 
---> addr2
p/d addr1 - addr2 


gdb
unset env LINES
unset env COLUMNS

ulimit -c unlimited
sudo service apport stop 

chmod u+x exploit.py
rm badfile
python3 exploit.py


AUMENTARE NUMERO OFFSET RETURN ADDRESS NELL'EXPLOIT

SE SI SPEGNE IL COMPUTER O SI CHIUDE LA SHELL BISOGNA CAMBIARE ALL'INTERNO DELLO SCRIPT PYTHON L'INDIRIZZO DI RITORNO (p $ebp ---> addr1)

SE SI LAVORA SU UBUNTU 16.04, IL SO NON PERMETTE LA CREAZIONE DI UNA SHELL DI ROOT. QUINDI O SI AVVIA UNA USER SHELL (\\sh nel file exploit) OPPURE:
apt install zsh
chsh -s /usr/bin/zsh root
CAMBIARE NEL FILE EXPLOIT \\sh in \zsh

# USEFUL TUTORIALS #
https://www.handsonsecurity.net/files/chapters/buffer_overflow.pdf
https://www.youtube.com/watch?v=hJ8IwyhqzD4
https://www.youtube.com/watch?v=1S0aBV-Waeo
